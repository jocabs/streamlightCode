/home/irriadmin/nps_app/
â”‚
â”œâ”€â”€ app.py                          â† ğŸ  Main Streamlit Home Dashboard (Navigation)
â”‚
â”œâ”€â”€ pages/                          â† ğŸ“‚ Folder for other Streamlit pages
â”‚   â”œâ”€â”€ 1_NPS_Report_Viewer.py      â† Page 1: NPS Report Viewer
â”‚   â””â”€â”€ 2_Asset_Inventory.py        â† Page 2: Asset Inventory
â”‚
â”œâ”€â”€ scripts/                        â† âš™ï¸ Helper scripts folder
â”‚   â””â”€â”€ convert_radius_to_csv.py    â† Converts RADIUS logs â†’ CSV
â”‚
â”œâ”€â”€ logs/                           â† ğŸ§¾ Folder where RADIUS logs (.log) are stored
â”‚   â””â”€â”€ IN251104.log
â”‚
â”œâ”€â”€ csv/                            â† ğŸ“Š Folder where converted CSVs are saved
â”‚   â””â”€â”€ NPS_Report_20251106.csv
â”‚
â”œâ”€â”€ csv_gen.log                     â† Log of CSV generation
â”œâ”€â”€ streamlit.log                   â† Streamlit runtime logs
â””â”€â”€ README.md                       â† Optional documentation file


sudo cat nps_report.py
import streamlit as st
import pandas as pd
import os

# --- Directory for NPS CSV files ---
CSV_DIR = os.path.join(os.path.dirname(__file__), "../csv/nps")
os.makedirs(CSV_DIR, exist_ok=True)

# --- Page setup ---
st.set_page_config(page_title="NPS Report Viewer", layout="wide")
st.title("ğŸ“Š NPS Report Viewer")

# --- Sidebar: Upload and browse ---
st.sidebar.header("ğŸ“ File Controls")

# Upload new CSV
uploaded_file = st.sidebar.file_uploader("ğŸ“¤ Upload a new NPS CSV file", type=["csv"], key="nps_upload")

if uploaded_file:
    file_path = os.path.join(CSV_DIR, uploaded_file.name)
    with open(file_path, "wb") as f:
        f.write(uploaded_file.getbuffer())
    st.sidebar.success(f"âœ… Uploaded: {uploaded_file.name}")

# List existing CSV files
existing_csvs = [f for f in os.listdir(CSV_DIR) if f.lower().endswith(".csv")]

selected_csv = None
if existing_csvs:
    selected_csv = st.sidebar.selectbox("ğŸ“‚ Select an existing CSV file", existing_csvs, key="nps_csv_select")
else:
    st.sidebar.info("â„¹ï¸ No CSV files found. Please upload one.")

# --- Main area: Data preview ---
if selected_csv:
    file_path = os.path.join(CSV_DIR, selected_csv)
    try:
        df = pd.read_csv(file_path, encoding="utf-8")
    except UnicodeDecodeError:
        df = pd.read_csv(file_path, encoding="latin1")

    st.success(f"ğŸ“„ Viewing: {selected_csv}")
    st.dataframe(df, use_container_width=True)
elif uploaded_file:
    # If file was just uploaded, load that immediately
    file_path = os.path.join(CSV_DIR, uploaded_file.name)
    df = pd.read_csv(file_path, encoding="utf-8", on_bad_lines="skip")
    st.success(f"ğŸ“„ Viewing: {uploaded_file.name}")
    st.dataframe(df, use_container_width=True)
else:
    st.info("ğŸ‘ˆ Use the sidebar to upload or select a CSV file.")
irriadmin@ubuntutest:~/nps_app/pages$

